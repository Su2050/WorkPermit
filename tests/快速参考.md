# æµ‹è¯•å¿«é€Ÿå‚è€ƒå¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…ä¾èµ–
cd tests
pip install -r requirements.txt
playwright install  # UIæµ‹è¯•éœ€è¦

# 2. å¯åŠ¨æœåŠ¡
# ç»ˆç«¯1: åç«¯
cd backend && python run_dev.py

# ç»ˆç«¯2: å‰ç«¯ï¼ˆUIæµ‹è¯•éœ€è¦ï¼‰
cd admin-web && npm run dev

# 3. è¿è¡Œæµ‹è¯•
python tests/run_all_tests.py --suite all
```

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

### è¿è¡Œæµ‹è¯•å¥—ä»¶

```bash
# å…¨éƒ¨æµ‹è¯•
python tests/run_all_tests.py --suite all

# APIæµ‹è¯•
python tests/run_all_tests.py --suite api

# UIæµ‹è¯•
python tests/run_all_tests.py --suite ui

# 422é”™è¯¯ä¸“é¡¹
python tests/run_all_tests.py --suite 422

# å¿«é€Ÿæµ‹è¯•ï¼ˆè·³è¿‡æ…¢é€Ÿæµ‹è¯•ï¼‰
python tests/run_all_tests.py --suite quick
```

### ç›´æ¥ä½¿ç”¨pytest

```bash
# APIæµ‹è¯•
pytest tests/test_api.py -v

# 422ä¸“é¡¹æµ‹è¯•
pytest tests/test_ticket_detail_422.py -v -s

# UIæµ‹è¯•
pytest tests/test_frontend_ui.py -v -s

# æ€§èƒ½æµ‹è¯•
pytest tests/test_performance.py -v -s

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_api.py::TestAuth::test_tc_auth_001_login_success -v
```

## ğŸ¯ æµ‹è¯•æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | ç”¨é€” | æµ‹è¯•æ•°é‡ | è¿è¡Œæ—¶é—´ |
|------|------|----------|----------|
| `test_api.py` | å®Œæ•´APIæµ‹è¯• | 80+ | çº¦30ç§’ |
| `test_ticket_detail_422.py` | 422é”™è¯¯ä¸“é¡¹ | 10+ | çº¦10ç§’ |
| `test_frontend_ui.py` | UIè‡ªåŠ¨åŒ– | 15+ | çº¦2åˆ†é’Ÿ |
| `test_performance.py` | æ€§èƒ½æµ‹è¯• | 10+ | çº¦1åˆ†é’Ÿ |

## ğŸ› è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹è¯¦ç»†è¾“å‡º

```bash
pytest tests/test_api.py -v -s
# -v: verboseï¼ˆè¯¦ç»†ï¼‰
# -s: æ˜¾ç¤ºprintè¾“å‡º
```

### åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•

```bash
pytest tests/test_api.py --lf
# --lf: last-failed
```

### é‡åˆ°ç¬¬ä¸€ä¸ªå¤±è´¥å°±åœæ­¢

```bash
pytest tests/test_api.py -x
```

### ç”ŸæˆHTMLæŠ¥å‘Š

```bash
pytest tests/ --html=reports/report.html --self-contained-html
```

### å¹¶è¡Œæµ‹è¯•

```bash
pytest tests/test_api.py -n 4
# ä½¿ç”¨4ä¸ªè¿›ç¨‹
```

## ğŸ” å¸¸è§é”™è¯¯æ’æŸ¥

### 1. è¿æ¥è¢«æ‹’ç»

```
ConnectionError: Connection refused
```

**è§£å†³**: 
```bash
# æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨
curl http://localhost:8000/api/health

# å¯åŠ¨åç«¯
cd backend && python run_dev.py
```

### 2. ç™»å½•å¤±è´¥

```
AssertionError: ç™»å½•åº”è¯¥æˆåŠŸ
```

**è§£å†³**:
```bash
# åˆå§‹åŒ–æ•°æ®
python backend/scripts/init_demo_data.py
```

### 3. Playwrightæ‰¾ä¸åˆ°æµè§ˆå™¨

```
Error: Executable doesn't exist
```

**è§£å†³**:
```bash
playwright install chromium
```

### 4. 422é”™è¯¯

```bash
# è¿è¡Œä¸“é¡¹æµ‹è¯•æŸ¥çœ‹è¯¦æƒ…
pytest tests/test_ticket_detail_422.py::TestTicketDetailAPIs::test_complete_ticket_detail_flow -v -s
```

## ğŸ“Š æµ‹è¯•è¦†ç›–çš„åŠŸèƒ½

### âœ… APIæµ‹è¯• (test_api.py)

- [x] è®¤è¯æˆæƒ (7ä¸ªæµ‹è¯•)
- [x] ä½œä¸šç¥¨ç®¡ç† (14ä¸ªæµ‹è¯•)
- [x] æ–½å·¥å•ä½ç®¡ç† (6ä¸ªæµ‹è¯•)
- [x] åŒºåŸŸç®¡ç† (1ä¸ªæµ‹è¯•)
- [x] è§†é¢‘ç®¡ç† (1ä¸ªæµ‹è¯•)
- [x] äººå‘˜ç®¡ç† (1ä¸ªæµ‹è¯•)
- [x] æŠ¥è¡¨ç»Ÿè®¡ (4ä¸ªæµ‹è¯•)
- [x] å‘Šè­¦ç®¡ç† (3ä¸ªæµ‹è¯•)
- [x] ç”¨æˆ·ç®¡ç† (3ä¸ªæµ‹è¯•)
- [x] æ—¥å¸¸ç¥¨æ® (2ä¸ªæµ‹è¯•) ğŸ†•
- [x] å®¡è®¡æ—¥å¿— (3ä¸ªæµ‹è¯•) ğŸ†•
- [x] å·¥åœ°ç®¡ç† (2ä¸ªæµ‹è¯•) ğŸ†•
- [x] å‹åŠ›æµ‹è¯• (3ä¸ªæµ‹è¯•) ğŸ†•

### âœ… UIæµ‹è¯• (test_frontend_ui.py)

- [x] ç™»å½•æµç¨‹
- [x] DashboardåŠ è½½
- [x] ä½œä¸šç¥¨åˆ—è¡¨ï¼ˆç­›é€‰ã€æœç´¢ï¼‰
- [x] ä½œä¸šç¥¨è¯¦æƒ…ï¼ˆç›‘æµ‹422é”™è¯¯ï¼‰â­
- [x] åˆ›å»ºä½œä¸šç¥¨è¡¨å•
- [x] åŒºåŸŸç®¡ç†

### âœ… ä¸“é¡¹æµ‹è¯• (test_ticket_detail_422.py)

- [x] ä½œä¸šç¥¨è¯¦æƒ…API
- [x] æ¯æ—¥ç¥¨æ®API
- [x] å®¡è®¡æ—¥å¿—APIï¼ˆé‡ç‚¹ï¼‰â­
- [x] å®Œæ•´æµç¨‹æµ‹è¯•
- [x] æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

### âœ… æ€§èƒ½æµ‹è¯• (test_performance.py)

- [x] å“åº”æ—¶é—´æµ‹è¯•
- [x] å¹¶å‘æµ‹è¯•
- [x] å¤§æ•°æ®é‡æµ‹è¯•
- [x] å†…å­˜æ³„æ¼æµ‹è¯•

## ğŸ¯ é‡ç‚¹æµ‹è¯•åœºæ™¯

### åœºæ™¯1: éªŒè¯ä½œä¸šç¥¨è¯¦æƒ…é¡µæ— 422é”™è¯¯

```bash
# æ–¹æ³•1: UIæµ‹è¯•ï¼ˆæ¨èï¼‰
pytest tests/test_frontend_ui.py::TestTicketDetail::test_ticket_detail_page_load -v -s

# æ–¹æ³•2: APIæµ‹è¯•
pytest tests/test_ticket_detail_422.py::TestTicketDetailAPIs::test_complete_ticket_detail_flow -v -s
```

**è¾“å‡ºç¤ºä¾‹**:
```
  === æµ‹è¯•å®Œæ•´æµç¨‹ ===
  1. è·å–ä½œä¸šç¥¨åˆ—è¡¨...
     âœ“ è·å–åˆ°ä½œä¸šç¥¨ID: xxx-xxx-xxx
  2. è·å–ä½œä¸šç¥¨è¯¦æƒ…...
     âœ“ è¯¦æƒ…: é«˜ç©ºä½œä¸šç¥¨
  3. è·å–æ¯æ—¥ç¥¨æ®...
     âœ“ æ¯æ—¥ç¥¨æ®: 0 æ¡
  4. è·å–å®¡è®¡æ—¥å¿—...
     âœ“ å®¡è®¡æ—¥å¿—: 5 æ¡
  === å®Œæ•´æµç¨‹æµ‹è¯•é€šè¿‡ ===
```

### åœºæ™¯2: éªŒè¯æ•°æ®å®Œæ•´æ€§

```bash
pytest tests/test_ticket_detail_422.py::TestDataIntegrity -v
```

**æ£€æŸ¥é¡¹**:
- âœ… æ–½å·¥å•ä½åç§°æ— é‡å¤
- âœ… åŒºåŸŸåç§°æ— é‡å¤ï¼ˆåŒä¸€å·¥åœ°å†…ï¼‰
- âœ… æ‰€æœ‰IDéƒ½æ˜¯æœ‰æ•ˆUUIDæ ¼å¼

### åœºæ™¯3: æ€§èƒ½åŸºå‡†æµ‹è¯•

```bash
pytest tests/test_performance.py -v -s
```

**æ€§èƒ½æŒ‡æ ‡**:
- ç™»å½•: < 500ms
- åˆ—è¡¨æŸ¥è¯¢: < 300ms
- Dashboard: < 1000ms
- å¹¶å‘10ä¸ªè¯·æ±‚: å…¨éƒ¨æˆåŠŸ

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Š

### æŸ¥çœ‹æŠ¥å‘Š

```bash
# ç”Ÿæˆå¹¶æŸ¥çœ‹HTMLæŠ¥å‘Š
pytest tests/ --html=reports/report.html --self-contained-html
open reports/report.html  # macOS
```

### æŠ¥å‘ŠåŒ…å«

- âœ… æµ‹è¯•é€šè¿‡/å¤±è´¥ç»Ÿè®¡
- âœ… æ¯ä¸ªæµ‹è¯•çš„è¯¦ç»†ç»“æœ
- âœ… å¤±è´¥æµ‹è¯•çš„é”™è¯¯ä¿¡æ¯
- âœ… æµ‹è¯•æ‰§è¡Œæ—¶é—´

## ğŸ”„ CI/CDé›†æˆ

### åœ¨CIä¸­è¿è¡Œ

```bash
# åªè¿è¡ŒAPIæµ‹è¯•ï¼ˆä¸éœ€è¦å‰ç«¯ï¼‰
python tests/run_all_tests.py --suite api --no-ui

# ç”ŸæˆJUnit XMLæŠ¥å‘Š
pytest tests/test_api.py --junitxml=reports/junit.xml
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å¼€å‘æ—¶

```bash
# ä¿®æ”¹ä»£ç åç«‹å³è¿è¡Œç›¸å…³æµ‹è¯•
pytest tests/test_api.py::TestWorkTickets -v
```

### 2. æäº¤å‰

```bash
# è¿è¡Œå®Œæ•´APIæµ‹è¯•
python tests/run_all_tests.py --suite api
```

### 3. å‘å¸ƒå‰

```bash
# è¿è¡Œå…¨éƒ¨æµ‹è¯•
python tests/run_all_tests.py --suite all
```

### 4. å®šæœŸ

```bash
# æ¯å‘¨è¿è¡Œæ€§èƒ½æµ‹è¯•
pytest tests/test_performance.py -v -s
```

## ğŸ“ è·å–å¸®åŠ©

```bash
# æŸ¥çœ‹pytestå¸®åŠ©
pytest --help

# æŸ¥çœ‹æµ‹è¯•å¥—ä»¶å¸®åŠ©
python tests/run_all_tests.py --help

# æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£
cat tests/README.md
```

## ğŸ“ å­¦ä¹ èµ„æº

- **Pytestæ–‡æ¡£**: https://docs.pytest.org
- **Playwrightæ–‡æ¡£**: https://playwright.dev/python
- **é¡¹ç›®README**: `tests/README.md`
- **å®Œæ•´æ€»ç»“**: `è‡ªåŠ¨åŒ–æµ‹è¯•å®Œå–„æ€»ç»“.md`

---

**æç¤º**: å°†æ­¤æ–‡ä»¶åŠ å…¥ä¹¦ç­¾ï¼Œéšæ—¶æŸ¥é˜…ï¼ â­

