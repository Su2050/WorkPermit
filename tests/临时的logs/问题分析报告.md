# Zeabur éƒ¨ç½²é—®é¢˜åˆ†ææŠ¥å‘Š

## ğŸ” é—®é¢˜æ€»ç»“

ä»è¿è¡Œæ—¥å¿—ä¸­å‘ç°äº† **3 ä¸ªå…³é”®é—®é¢˜**ï¼š

---

## âŒ é—®é¢˜ 1ï¼šç¯å¢ƒå˜é‡æ ¼å¼é”™è¯¯ï¼ˆæœ€ä¸¥é‡ï¼‰

### é”™è¯¯ä¿¡æ¯ï¼š
```
sqlalchemy.exc.ArgumentError: Could not parse SQLAlchemy URL from string 
'DATABASE_URL=postgresql+asyncpg://root:6D8XHp0U2k7wd53EZsSuhvm94B1xTlKz@sjc1.clusters.zeabur.com:29478/work_permit'
```

### é—®é¢˜åŸå› ï¼š
**ç¯å¢ƒå˜é‡çš„å€¼åŒ…å«äº† `DATABASE_URL=` å‰ç¼€ï¼**

SQLAlchemy æœŸæœ›çš„æ˜¯çº¯è¿æ¥å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š
```
postgresql+asyncpg://root:password@host:port/dbname
```

ä½†å®é™…æ”¶åˆ°çš„æ˜¯ï¼š
```
DATABASE_URL=postgresql+asyncpg://root:password@host:port/dbname
```

### è§£å†³æ–¹æ¡ˆï¼š
åœ¨ Zeabur Backend æœåŠ¡çš„ç¯å¢ƒå˜é‡ä¸­ï¼Œ**`DATABASE_URL` çš„å€¼åº”è¯¥åªåŒ…å«è¿æ¥å­—ç¬¦ä¸²ï¼Œä¸è¦åŒ…å« `DATABASE_URL=` å‰ç¼€**ã€‚

**æ­£ç¡®æ ¼å¼ï¼š**
```
postgresql+asyncpg://root:6D8XHp0U2k7wd53EZsSuhvm94B1xTlKz@postgres:5432/work_permit
```

**é”™è¯¯æ ¼å¼ï¼š**
```
DATABASE_URL=postgresql+asyncpg://root:6D8XHp0U2k7wd53EZsSuhvm94B1xTlKz@sjc1.clusters.zeabur.com:29478/work_permit
```

---

## âŒ é—®é¢˜ 2ï¼šæ•°æ®åº“ä¸»æœºåé”™è¯¯

### é”™è¯¯ä¿¡æ¯ï¼š
```
socket.gaierror: [Errno -2] Name or service not known
```

### é—®é¢˜åŸå› ï¼š
ä½¿ç”¨äº†å…¬ç½‘åœ°å€ `sjc1.clusters.zeabur.com:29478`ï¼Œä½†åœ¨å®¹å™¨å†…éƒ¨åº”è¯¥ä½¿ç”¨**æœåŠ¡å** `postgres`ã€‚

### è§£å†³æ–¹æ¡ˆï¼š
**ä½¿ç”¨æœåŠ¡åè€Œä¸æ˜¯å…¬ç½‘åœ°å€ï¼š**

**æ­£ç¡®ï¼š**
```
postgresql+asyncpg://root:password@postgres:5432/work_permit
```

**é”™è¯¯ï¼š**
```
postgresql+asyncpg://root:password@sjc1.clusters.zeabur.com:29478/work_permit
```

---

## âš ï¸ é—®é¢˜ 3ï¼šAlembic è¿ç§»æ—¶æ‰¾ä¸åˆ° app æ¨¡å—

### é”™è¯¯ä¿¡æ¯ï¼š
```
ModuleNotFoundError: No module named 'app'
```

### é—®é¢˜åŸå› ï¼š
Alembic åœ¨è¿è¡Œè¿ç§»æ—¶ï¼Œå·¥ä½œç›®å½•å¯èƒ½ä¸åœ¨ `/app`ï¼Œå¯¼è‡´æ— æ³•å¯¼å…¥ `app` æ¨¡å—ã€‚

### è§£å†³æ–¹æ¡ˆï¼š
ä¿®æ”¹ `backend/Dockerfile` ä¸­çš„å¯åŠ¨è„šæœ¬ï¼Œç¡®ä¿åœ¨æ­£ç¡®çš„å·¥ä½œç›®å½•è¿è¡Œ Alembicã€‚

---

## ğŸ”§ å®Œæ•´ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®æ­£ DATABASE_URL ç¯å¢ƒå˜é‡

åœ¨ Zeabur Backend æœåŠ¡ä¸­ï¼Œè®¾ç½® `DATABASE_URL` ä¸ºï¼š

```
postgresql+asyncpg://root:t0lDQTkbO3U8sjwy5A7PZ41R9Coax6c2@postgres:5432/work_permit
```

**å…³é”®ç‚¹ï¼š**
- âœ… åªåŒ…å«è¿æ¥å­—ç¬¦ä¸²ï¼Œ**ä¸è¦**åŒ…å« `DATABASE_URL=` å‰ç¼€
- âœ… ä½¿ç”¨æœåŠ¡å `postgres` è€Œä¸æ˜¯å…¬ç½‘åœ°å€
- âœ… ä½¿ç”¨ç«¯å£ `5432`ï¼ˆPostgreSQL é»˜è®¤ç«¯å£ï¼‰
- âœ… æ•°æ®åº“åä½¿ç”¨ `work_permit`

---

### 2. ä¿®å¤ Dockerfile å¯åŠ¨è„šæœ¬

éœ€è¦ç¡®ä¿ Alembic åœ¨æ­£ç¡®çš„å·¥ä½œç›®å½•è¿è¡Œã€‚

---

## ğŸ“‹ æ“ä½œæ­¥éª¤

### æ­¥éª¤ 1ï¼šä¿®æ­£ç¯å¢ƒå˜é‡

1. è¿›å…¥ Zeabur Backend æœåŠ¡
2. ç‚¹å‡»"ç¯å¢ƒå˜é‡"æ ‡ç­¾
3. æ‰¾åˆ° `DATABASE_URL`
4. ç‚¹å‡»ç¼–è¾‘ âœï¸
5. **åˆ é™¤ `DATABASE_URL=` å‰ç¼€**ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
6. ä¿®æ”¹ä¸ºï¼š
   ```
   postgresql+asyncpg://root:t0lDQTkbO3U8sjwy5A7PZ41R9Coax6c2@postgres:5432/work_permit
   ```
7. ä¿å­˜

### æ­¥éª¤ 2ï¼šç­‰å¾…æœåŠ¡é‡å¯

æœåŠ¡ä¼šè‡ªåŠ¨é‡å¯ï¼ŒæŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ˜¯å¦æˆåŠŸã€‚

---

## âœ… é¢„æœŸç»“æœ

ä¿®å¤åï¼Œæ—¥å¿—åº”è¯¥æ˜¾ç¤ºï¼š

```
Waiting for database...
Running database migrations...
INFO:     Alembic upgrade head completed successfully
Starting application...
INFO:     Started server process [1]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡å€¼æ ¼å¼**ï¼šZeabur ä¸­ç¯å¢ƒå˜é‡çš„å€¼åº”è¯¥**åªåŒ…å«å€¼æœ¬èº«**ï¼Œä¸è¦åŒ…å« `KEY=` å‰ç¼€
2. **æœåŠ¡é—´é€šä¿¡**ï¼šå®¹å™¨å†…éƒ¨ä½¿ç”¨æœåŠ¡åï¼ˆå¦‚ `postgres`ï¼‰ï¼Œä¸è¦ä½¿ç”¨å…¬ç½‘åœ°å€
3. **æ•°æ®åº“ç«¯å£**ï¼šPostgreSQL é»˜è®¤ç«¯å£æ˜¯ `5432`ï¼Œä¸æ˜¯ `29478`ï¼ˆé‚£æ˜¯å…¬ç½‘æ˜ å°„ç«¯å£ï¼‰

---

ç”Ÿæˆæ—¶é—´ï¼š2026-01-11

