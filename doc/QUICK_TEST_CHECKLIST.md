# å¿«é€Ÿæµ‹è¯•æ£€æŸ¥æ¸…å•

**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2026-01-10  

---

## ğŸš€ ç¯å¢ƒå‡†å¤‡

### åç«¯ç¯å¢ƒ
- [ ] Python 3.9+ å·²å®‰è£…
- [ ] è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
- [ ] æ•°æ®åº“å·²é…ç½®å¹¶è¿è¡Œ
- [ ] ä¾èµ–åŒ…å·²å®‰è£…ï¼ˆrequirements.txtï¼‰
- [ ] ffmpeg å·²å®‰è£…ï¼ˆç”¨äºè§†é¢‘ä¸Šä¼ ï¼‰
- [ ] openpyxl å·²å®‰è£…ï¼ˆç”¨äº Excel å¤„ç†ï¼‰

```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬
python --version

# å®‰è£…ä¾èµ–
pip install openpyxl

# æ£€æŸ¥ ffmpeg
which ffmpeg
ffmpeg -version
```

### å‰ç«¯ç¯å¢ƒ
- [ ] Node.js 16+ å·²å®‰è£…
- [ ] npm ä¾èµ–å·²å®‰è£…
- [ ] å¼€å‘æœåŠ¡å™¨å¯ä»¥å¯åŠ¨

```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version

# å®‰è£…ä¾èµ–
cd admin-web
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

---

## âœ… P1 åç«¯ API æµ‹è¯•æ¸…å•

### 1. ä½œä¸šç¥¨ç»Ÿè®¡ API

**API**: `GET /admin/work-tickets/stats`

æµ‹è¯•æ­¥éª¤:
- [ ] æ— å‚æ•°æŸ¥è¯¢æ‰€æœ‰ä½œä¸šç¥¨ç»Ÿè®¡
- [ ] ä½¿ç”¨æ—¥æœŸèŒƒå›´ç­›é€‰
- [ ] éªŒè¯è¿”å›çš„ç»Ÿè®¡æ•°æ®
  - [ ] total_count æ­£ç¡®
  - [ ] å„çŠ¶æ€æ•°é‡æ­£ç¡®
  - [ ] completion_rate æ­£ç¡®
  - [ ] total_workers æ­£ç¡®
  - [ ] total_areas æ­£ç¡®

```bash
# æµ‹è¯•å‘½ä»¤
curl "http://localhost:8000/api/admin/work-tickets/stats" \
  -H "Authorization: Bearer YOUR_TOKEN" | jq
```

é¢„æœŸç»“æœ: âœ… è¿”å›ç»Ÿè®¡æ•°æ®ï¼Œcode=0

---

### 2. ä½œä¸šç¥¨å¯¼å‡º API

**API**: `GET /admin/work-tickets/export`

æµ‹è¯•æ­¥éª¤:
- [ ] å¯¼å‡ºæ‰€æœ‰ä½œä¸šç¥¨
- [ ] æŒ‰çŠ¶æ€ç­›é€‰å¯¼å‡º
- [ ] æŒ‰æ–½å·¥å•ä½ç­›é€‰å¯¼å‡º
- [ ] æ‰“å¼€ Excel æ–‡ä»¶éªŒè¯
  - [ ] è¡¨å¤´æ ·å¼æ­£ç¡®ï¼ˆè“è‰²èƒŒæ™¯ï¼‰
  - [ ] æ•°æ®å®Œæ•´
  - [ ] æ—¥æœŸæ ¼å¼æ­£ç¡®

```bash
# æµ‹è¯•å‘½ä»¤
curl "http://localhost:8000/api/admin/work-tickets/export" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -o tickets.xlsx
  
# æ‰“å¼€æ–‡ä»¶éªŒè¯
open tickets.xlsx  # macOS
# æˆ–
xdg-open tickets.xlsx  # Linux
```

é¢„æœŸç»“æœ: âœ… ä¸‹è½½ Excel æ–‡ä»¶ï¼Œæ ¼å¼æ­£ç¡®

---

### 3. æ¯æ—¥ç¥¨æ®å–æ¶ˆ API

**API**: `POST /admin/daily-tickets/{daily_ticket_id}/cancel`

æµ‹è¯•æ­¥éª¤:
- [ ] å–æ¶ˆæ­£å¸¸çŠ¶æ€çš„æ¯æ—¥ç¥¨æ®
- [ ] éªŒè¯çŠ¶æ€å˜æ›´ä¸º CANCELLED
- [ ] éªŒè¯æˆæƒå·²æ’¤é”€
- [ ] éªŒè¯å®¡è®¡æ—¥å¿—å·²è®°å½•
- [ ] å°è¯•å–æ¶ˆå·²å–æ¶ˆçš„ç¥¨æ®ï¼ˆåº”å¤±è´¥ï¼‰

```bash
# æµ‹è¯•å‘½ä»¤
curl -X POST "http://localhost:8000/api/admin/daily-tickets/{id}/cancel" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"reason": "æµ‹è¯•å–æ¶ˆ"}' | jq
```

é¢„æœŸç»“æœ: âœ… è¿”å›æˆåŠŸï¼Œrevoked_grants_count > 0

---

### 4. äººå‘˜æ‰¹é‡å¯¼å…¥ API

**API**: `POST /admin/workers/import`

æµ‹è¯•æ­¥éª¤:
- [ ] ä¸‹è½½å¯¼å…¥æ¨¡æ¿
- [ ] å¡«å†™æ­£ç¡®çš„æµ‹è¯•æ•°æ®
- [ ] ä¸Šä¼ å¹¶éªŒè¯å¯¼å…¥æˆåŠŸ
- [ ] æµ‹è¯•é”™è¯¯æ•°æ®ï¼ˆæ ¼å¼é”™è¯¯ã€é‡å¤æ•°æ®ï¼‰
- [ ] éªŒè¯è¿”å›çš„å¤±è´¥åŸå› 

```bash
# 1. ä¸‹è½½æ¨¡æ¿
curl "http://localhost:8000/api/admin/workers/template" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -o template.xlsx

# 2. å¯¼å…¥äººå‘˜
curl -X POST "http://localhost:8000/api/admin/workers/import" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@workers.xlsx" | jq
```

é¢„æœŸç»“æœ: âœ… è¿”å› success_count å’Œ failed_count

---

### 5. è§†é¢‘ä¸Šä¼  API

**API**: `POST /admin/videos/upload`

æµ‹è¯•æ­¥éª¤:
- [ ] å‡†å¤‡æµ‹è¯•è§†é¢‘æ–‡ä»¶ï¼ˆ< 500MBï¼‰
- [ ] ä¸Šä¼ è§†é¢‘æ–‡ä»¶
- [ ] éªŒè¯è§†é¢‘è®°å½•å·²åˆ›å»º
- [ ] éªŒè¯å…ƒæ•°æ®å·²æå–ï¼ˆæ—¶é•¿ã€åˆ†è¾¨ç‡ï¼‰
- [ ] éªŒè¯ç¼©ç•¥å›¾å·²ç”Ÿæˆ
- [ ] æµ‹è¯•ä¸æ”¯æŒçš„æ ¼å¼ï¼ˆåº”å¤±è´¥ï¼‰
- [ ] æµ‹è¯•è¶…å¤§æ–‡ä»¶ï¼ˆåº”å¤±è´¥ï¼‰

```bash
# æµ‹è¯•å‘½ä»¤
curl -X POST "http://localhost:8000/api/admin/videos/upload" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@test_video.mp4" \
  -F "title=æµ‹è¯•è§†é¢‘" \
  -F "description=æµ‹è¯•æè¿°" \
  -F "category=general" | jq
```

é¢„æœŸç»“æœ: âœ… è¿”å›è§†é¢‘ä¿¡æ¯ï¼ŒåŒ…å«æ—¶é•¿å’Œåˆ†è¾¨ç‡

---

## âœ… P1 å‰ç«¯é¡µé¢æµ‹è¯•æ¸…å•

### 1. é—¨ç¦æˆæƒç®¡ç†é¡µé¢

**è·¯å¾„**: `/access-grants`

é¡µé¢åŠ è½½æµ‹è¯•:
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºæ•°æ®
- [ ] æˆæƒåˆ—è¡¨æ˜¾ç¤ºæ•°æ®
- [ ] æ²¡æœ‰ JavaScript é”™è¯¯

ç­›é€‰åŠŸèƒ½æµ‹è¯•:
- [ ] æŒ‰çŠ¶æ€ç­›é€‰
- [ ] æŒ‰æ—¥æœŸç­›é€‰
- [ ] æŒ‰å·¥äººå§“åç­›é€‰
- [ ] é‡ç½®ç­›é€‰æ¡ä»¶

æ“ä½œåŠŸèƒ½æµ‹è¯•:
- [ ] å•ä¸ªæˆæƒé‡è¯•
- [ ] æ‰¹é‡é€‰æ‹©æˆæƒ
- [ ] æ‰¹é‡é‡è¯•æ“ä½œ
- [ ] æ’¤é”€æˆæƒæ“ä½œ
- [ ] ç¡®è®¤å¯¹è¯æ¡†æ˜¾ç¤º

åˆ†é¡µåŠŸèƒ½æµ‹è¯•:
- [ ] åˆ‡æ¢æ¯é¡µæ˜¾ç¤ºæ•°é‡
- [ ] ç¿»é¡µåŠŸèƒ½
- [ ] è·³è½¬åˆ°æŒ‡å®šé¡µ

UI æµ‹è¯•:
- [ ] çŠ¶æ€æ ‡ç­¾é¢œè‰²æ­£ç¡®
  - [ ] å¾…åŒæ­¥: é»„è‰²
  - [ ] å·²åŒæ­¥: ç»¿è‰²
  - [ ] åŒæ­¥å¤±è´¥: çº¢è‰²
  - [ ] å·²æ’¤é”€: ç°è‰²
- [ ] æŒ‰é’®ç¦ç”¨çŠ¶æ€æ­£ç¡®
- [ ] åŠ è½½çŠ¶æ€æ˜¾ç¤º

---

### 2. åŸ¹è®­è¿›åº¦è¯¦æƒ…é¡µé¢

**è·¯å¾„**: `/training/detail/:worker_id`

é¡µé¢åŠ è½½æµ‹è¯•:
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] å·¥äººä¿¡æ¯æ˜¾ç¤ºæ­£ç¡®
- [ ] åŸ¹è®­ç»Ÿè®¡æ˜¾ç¤ºæ­£ç¡®
- [ ] åŸ¹è®­è®°å½•åˆ—è¡¨æ˜¾ç¤º
- [ ] æ²¡æœ‰ JavaScript é”™è¯¯

ä¿¡æ¯å±•ç¤ºæµ‹è¯•:
- [ ] å·¥äººåŸºæœ¬ä¿¡æ¯å®Œæ•´
- [ ] åŸ¹è®­ç»Ÿè®¡æ•°æ®æ­£ç¡®
- [ ] åŸ¹è®­è®°å½•æŒ‰æ—¶é—´æ’åº
- [ ] è¿›åº¦æ¡æ˜¾ç¤ºæ­£ç¡®
- [ ] å¯ç–‘äº‹ä»¶æ—¶é—´çº¿æ˜¾ç¤º

äº¤äº’åŠŸèƒ½æµ‹è¯•:
- [ ] ç‚¹å‡»è¿”å›æŒ‰é’®
- [ ] ç‚¹å‡»åˆ·æ–°æŒ‰é’®
- [ ] ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
- [ ] åŸ¹è®­è¯¦æƒ…å¯¹è¯æ¡†æ˜¾ç¤º
- [ ] ç‚¹å‡»å¯¼å‡ºæŠ¥å‘Š

UI æµ‹è¯•:
- [ ] çŠ¶æ€æ ‡ç­¾é¢œè‰²æ­£ç¡®
- [ ] è¿›åº¦æ¡é¢œè‰²æ­£ç¡®
- [ ] æ—¶é—´çº¿æ ·å¼æ­£ç¡®
- [ ] å¯¹è¯æ¡†å¸ƒå±€æ­£ç¡®

---

## ğŸ” ä»£ç è´¨é‡æ£€æŸ¥æ¸…å•

### Python ä»£ç æ£€æŸ¥

```bash
# è¯­æ³•æ£€æŸ¥
cd backend
python -m py_compile app/api/admin/tickets.py
python -m py_compile app/api/admin/daily_tickets.py
python -m py_compile app/api/admin/workers.py
python -m py_compile app/api/admin/videos.py
```

- [ ] tickets.py æ— è¯­æ³•é”™è¯¯
- [ ] daily_tickets.py æ— è¯­æ³•é”™è¯¯
- [ ] workers.py æ— è¯­æ³•é”™è¯¯
- [ ] videos.py æ— è¯­æ³•é”™è¯¯

### Vue ä»£ç æ£€æŸ¥

```bash
# Lint æ£€æŸ¥
cd admin-web
npm run lint
```

- [ ] access-grants/index.vue æ—  lint é”™è¯¯
- [ ] training/detail.vue æ—  lint é”™è¯¯

---

## ğŸ” å®‰å…¨æ£€æŸ¥æ¸…å•

### åç«¯å®‰å…¨
- [ ] API éœ€è¦è®¤è¯ï¼ˆBearer Tokenï¼‰
- [ ] å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- [ ] æ–‡ä»¶ç±»å‹éªŒè¯
- [ ] æ–‡ä»¶å¤§å°é™åˆ¶
- [ ] SQL æ³¨å…¥é˜²æŠ¤ï¼ˆä½¿ç”¨ ORMï¼‰
- [ ] æ•æ„Ÿæ•°æ®è„±æ•

### å‰ç«¯å®‰å…¨
- [ ] XSS é˜²æŠ¤ï¼ˆVue è‡ªåŠ¨è½¬ä¹‰ï¼‰
- [ ] CSRF Token éªŒè¯
- [ ] ç”¨æˆ·è¾“å…¥éªŒè¯
- [ ] æ–‡ä»¶ä¸Šä¼ éªŒè¯

---

## ğŸ“Š æ€§èƒ½æ£€æŸ¥æ¸…å•

### API å“åº”æ—¶é—´

æµ‹è¯•å·¥å…·: ä½¿ç”¨ `time` å‘½ä»¤æˆ–æµè§ˆå™¨å¼€å‘è€…å·¥å…·

- [ ] ä½œä¸šç¥¨ç»Ÿè®¡ < 500ms
- [ ] ä½œä¸šç¥¨å¯¼å‡º < 2sï¼ˆ100æ¡æ•°æ®ï¼‰
- [ ] æ¯æ—¥ç¥¨æ®å–æ¶ˆ < 1s
- [ ] äººå‘˜å¯¼å…¥ < 5sï¼ˆ100æ¡æ•°æ®ï¼‰
- [ ] è§†é¢‘ä¸Šä¼  è§†æ–‡ä»¶å¤§å°è€Œå®š

### é¡µé¢åŠ è½½æ—¶é—´

- [ ] é—¨ç¦æˆæƒç®¡ç†é¡µé¢ < 1s
- [ ] åŸ¹è®­è¿›åº¦è¯¦æƒ…é¡µé¢ < 1s

### æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

- [ ] ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢
- [ ] é¿å… N+1 æŸ¥è¯¢
- [ ] ä½¿ç”¨ç´¢å¼•
- [ ] æŸ¥è¯¢ç»“æœç¼“å­˜ï¼ˆå»ºè®®ï¼‰

---

## ğŸ› é”™è¯¯å¤„ç†æ£€æŸ¥æ¸…å•

### åç«¯é”™è¯¯å¤„ç†

- [ ] è¿”å›ç»Ÿä¸€é”™è¯¯æ ¼å¼
- [ ] é”™è¯¯ç æ¸…æ™°
- [ ] é”™è¯¯ä¿¡æ¯å‹å¥½
- [ ] è®°å½•é”™è¯¯æ—¥å¿—
- [ ] å¼‚å¸¸æ•è·å®Œæ•´

### å‰ç«¯é”™è¯¯å¤„ç†

- [ ] API é”™è¯¯æ•è·
- [ ] æ˜¾ç¤ºå‹å¥½é”™è¯¯æç¤º
- [ ] ç½‘ç»œé”™è¯¯å¤„ç†
- [ ] è¡¨å•éªŒè¯é”™è¯¯æç¤º

---

## ğŸ“ æ–‡æ¡£æ£€æŸ¥æ¸…å•

### ä»£ç æ–‡æ¡£
- [ ] å‡½æ•°æœ‰æ–‡æ¡£å­—ç¬¦ä¸²
- [ ] å‚æ•°è¯´æ˜æ¸…æ™°
- [ ] è¿”å›å€¼è¯´æ˜å®Œæ•´
- [ ] å¼‚å¸¸è¯´æ˜å®Œæ•´

### ç”¨æˆ·æ–‡æ¡£
- [x] P0 å®æ–½æ€»ç»“æ–‡æ¡£
- [x] P0 æµ‹è¯•æŒ‡å—æ–‡æ¡£
- [x] P0 å®ŒæˆæŠ¥å‘Š
- [x] P1 å®æ–½æ€»ç»“æ–‡æ¡£
- [x] P1 å®ŒæˆæŠ¥å‘Š
- [x] P1&P2 æµ‹è¯•æŠ¥å‘Š
- [x] å¿«é€Ÿæµ‹è¯•æ£€æŸ¥æ¸…å•ï¼ˆæœ¬æ–‡æ¡£ï¼‰

---

## âœ… æµ‹è¯•å®Œæˆæ ‡å‡†

### é€šè¿‡æ ‡å‡†

P1 åŠŸèƒ½æµ‹è¯•é€šè¿‡éœ€æ»¡è¶³:
1. âœ… æ‰€æœ‰ API åŠŸèƒ½æ­£å¸¸
2. âœ… æ‰€æœ‰å‰ç«¯é¡µé¢æ­£å¸¸
3. âœ… ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡
4. âœ… å®‰å…¨æ£€æŸ¥é€šè¿‡
5. âœ… æ€§èƒ½ç¬¦åˆé¢„æœŸ
6. âœ… é”™è¯¯å¤„ç†å®Œå–„
7. âœ… æ–‡æ¡£å®Œæ•´

### æµ‹è¯•ç­¾å­—

- [ ] å¼€å‘æµ‹è¯•å®Œæˆ
- [ ] åŠŸèƒ½æµ‹è¯•å®Œæˆ
- [ ] ä»£ç å®¡æŸ¥å®Œæˆ
- [ ] æ–‡æ¡£å®¡æŸ¥å®Œæˆ

---

## ğŸ¯ å¿«é€Ÿæµ‹è¯•å‘½ä»¤

```bash
# 1. åç«¯è¯­æ³•æ£€æŸ¥
cd backend
for file in app/api/admin/{tickets,daily_tickets,workers,videos}.py; do
  python -m py_compile $file && echo "âœ… $file" || echo "âŒ $file"
done

# 2. å‰ç«¯ lint æ£€æŸ¥
cd admin-web
npm run lint

# 3. å¯åŠ¨åç«¯æœåŠ¡
cd backend
uvicorn app.main:app --reload --port 8000

# 4. å¯åŠ¨å‰ç«¯æœåŠ¡
cd admin-web
npm run dev

# 5. æµ‹è¯• APIï¼ˆéœ€è¦å…ˆè·å– Tokenï¼‰
# è·å– Token
TOKEN=$(curl -X POST "http://localhost:8000/api/admin/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"your_password"}' | jq -r '.data.access_token')

# æµ‹è¯•ä½œä¸šç¥¨ç»Ÿè®¡
curl "http://localhost:8000/api/admin/work-tickets/stats" \
  -H "Authorization: Bearer $TOKEN" | jq

# æµ‹è¯•ä½œä¸šç¥¨å¯¼å‡º
curl "http://localhost:8000/api/admin/work-tickets/export" \
  -H "Authorization: Bearer $TOKEN" \
  -o tickets.xlsx
```

---

**æ£€æŸ¥æ¸…å•ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2026-01-10  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

